# BUG-012: CQC rating not captured

**Severity:** Moderate
**Status:** Fixed
**Found in:** QA Phase 1 — Ground Truth (30-profile cohort)
**Spec reference:** Quick Spec §3.1 `cqc_rating` field
**Date:** 2026-02-28

---

## Description

`cqc_rating` is null for ALL 30 profiles tested, despite CQC ratings being clearly visible on the live pages in the Locations section.

## Evidence

Profile `mr-piers-moreau` live page shows:
- "CQC" label
- "Overall rating"
- "Good"

But `cqc_rating` in DB is null.

## Root Cause

`extractCqcRating()` in `parse.ts` (line ~1009) uses the regex:

```typescript
/CQC\s*rating:\s*(\w+)/i
```

This expects the pattern `CQC rating: Good` with a colon. However, the live page renders CQC data as separate DOM elements:

```
<div>CQC</div>
<div>Overall rating</div>
<div>Good</div>
```

When `$("body").text()` concatenates these, the result is something like `"CQCOverall ratingGood"` — no colon, and "Overall" is prepended before "rating". The regex doesn't match.

## Fix

1. Target the CQC section within the Locations heading region using DOM selectors rather than body text regex
2. Or broaden the regex to handle the actual format: `/CQC\s*(?:Overall\s+)?rating\s*:?\s*(\w+)/i`
3. Best approach: look for the CQC-specific class/structure in the Locations list item DOM

## Regression Tests

- Page with "CQC Overall rating Good" (no colon) → extracts "Good"
- Page with "CQC rating: Outstanding" → extracts "Outstanding"
- Page with no CQC section → returns null
