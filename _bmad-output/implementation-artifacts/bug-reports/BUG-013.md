# BUG-013: Central booking tel: link captured instead of hospital phone

**Severity:** Moderate
**Status:** Fixed
**Found in:** QA Phase 1 — 10-profile random spot-check
**Spec reference:** Quick Spec §3.1 `contact_phone` field
**Date:** 2026-02-28

---

## Description

`contact_phone` captures a central Nuffield booking number (`0113 322 7251`, Leeds) instead of the hospital-specific phone displayed on the profile page. Affects profiles where the "Ask a question" contact form contains a generic central tel: link rather than the local hospital number.

## Evidence

Profile `mr-e-b-ahmed` (North Staffordshire hospital):
- **Live page sidebar**: "Or call us on 01782 432227" (correct North Staffordshire number)
- **DB `contact_phone`**: `01133227251` (central Leeds booking number)
- **Source tel: link**: `<a class="phone-number" href="tel:0113 3227251">` in contact form

Profile `dr-dafydd-ifan` (Wessex hospital):
- **Live page sidebar**: "02380 266 377" (correct Wessex number)
- **DB `contact_phone`**: `01133227251` (same central Leeds number)

Two different consultants at different hospitals have identical wrong phone numbers.

## Root Cause

`extractContactInfo()` in `parse.ts` (line ~888) extracts phone from `<a href="tel:...">` links as the primary method. On some profiles, the "Ask a question" form has a central Nuffield booking tel: link (`tel:0113 3227251`) instead of the hospital-specific number. The scraper captures this central number because it's the first valid tel: link found.

Meanwhile, the correct hospital phone is displayed in the sidebar CTA section using `<span itemprop="telephone">`, which is semantically marked up but not extracted.

```html
<!-- Central number captured (wrong) -->
<a class="phone-number" href="tel:0113 3227251">0113 3227251</a>

<!-- Hospital number available but ignored (correct) -->
<span class="cta-call__text" itemprop="telephone">01782 432227</span>
```

## Fix

Reorder phone extraction to prefer `[itemprop="telephone"]` elements (sidebar CTA / location section) over tel: links:

1. **Primary**: Extract from `[itemprop="telephone"]` — contains the hospital-specific phone
2. **Fallback**: Extract from `<a href="tel:...">` links
3. **Final fallback**: Scan body text with PHONE_REGEX

The `itemprop="telephone"` attribute is present on all tested profiles and consistently contains the hospital-specific phone number.

## Regression Tests

- Profile with `itemprop="telephone"` AND a different tel: link → extracts the itemprop phone
- Profile with `itemprop="telephone"` only (no tel: link) → extracts the itemprop phone
- Profile with tel: link only (no itemprop) → falls back to tel: link
- Profile with empty itemprop and valid tel: link → falls back to tel: link
