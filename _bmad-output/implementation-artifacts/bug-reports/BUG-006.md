# BUG-006: AI failure masks bio_depth with "missing"

**Severity:** Moderate
**Status:** Fixed
**Found in:** QA Pre-testing — live scrape of `professor-stephen-mcdonnell`
**Spec reference:** Quick Spec §3.2 `bio_depth` field; §5 Haiku Prompt Contract
**Date:** 2026-02-28

## Description

When AI assessment fails or returns null, the pipeline hardcodes `bio_depth: "missing"` even when the About section has substantive content (2,783 characters in this case). This caused the profile to score Silver/65 instead of Gold/80.

## Root Cause

Two failure paths both default to `bio_depth: "missing"`:
1. The catch block in `runAssessStage` uses a constant fallback
2. `assessProfile()` never throws — it catches errors internally and returns `NULL_ASSESSMENT` with `bio_depth: "missing"`

Neither path considers the actual parsed about text.

## Fix

- Added `heuristicBioDepth(text: string | null)` function in `parse.ts`:
  - \>300 chars → "substantive"
  - \>100 chars → "adequate"
  - \>0 chars → "thin"
  - empty/null → "missing"
- Updated `run.ts` catch block to use heuristic fallback
- Added override in success path: if AI returns "missing" but `parsed.about_text` exists, override with heuristic value

## Impact

Profile quality score: Silver/65 → Gold/80 (+15 points from bio_depth fix alone).

## Regression Tests

- `parse.test.ts`: "heuristicBioDepth returns correct depth levels"

## Files Changed

- `src/scraper/parse.ts` — new `heuristicBioDepth` export
- `src/scraper/run.ts` — import and use in catch block + success path override
